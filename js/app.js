var corSelecionada,criarProdutos,fetch,malhaSelecionada,produto;fetch=function(o){var e;return e=new Array,$.getJSON("json/"+o,function(o){var n,t;return t=new String,n=1,$.each(o,function(o,r){var a;return r.select===t?n+=1:n=1,t=r.select,a=new produto(parseInt(n),r.nome,r.tipo,r.ref,r.sub),e.push(a)})}).fail(function(){return console.log("deu ruim, verifique o JSON")}),e},malhaSelecionada="",corSelecionada="",produto=function(){function o(o,e,n,t,r){this.cdp=o,this.nome=e,this.tipo=n,this.ref=t,this.sub=r,this.select=$("#"+this.tipo+" select"),this.oid=this.tipo+this.cdp,this.ext=this.ref,this.el='<option value="'+this.nome+'" oid="'+this.oid+'" data-ext="'+this.ext+'" >'+this.nome+"</option>",$(this.select).append(this.el)}return o}(),criarProdutos=function(o){var e,n,t,r,a,i,s,l,c,h,u,f,p;for(t=fetch(o),i=[],r=[],a=[],h=["malhas","golas","punhos"],l=["cor","modeloGola","modeloPunhos"],e=0,n=function(o){var e,n,c,h,u,f,p,m,d,g,v,S,b,P,w,x,R;for(u=0,g=0,b=t.length;b>g;g++)if(n=t[g],n.tipo+n.cdp===o){p=n.ref,x=n.sub;for(h in x)c=x[h],f=c.nome,d=c.tipo,m=c.ref,$("#"+d+" option").remove(),$("#"+d+" select").append("<option></option>")}for(e=function(o){var e,n;n=[];for(h in o)c=o[h],f=c.nome,d=c.tipo,m=c.ref,e=new produto(u+=1,f,d,m),e.subPaiRef=p,e.ext+=e.subPaiRef,"cor"===d?n.push(r.push(e)):"modeloGola"===d?n.push(a.push(e)):n.push(i.push(e));return n},v=0,P=t.length;P>v;v++)n=t[v],n.tipo+n.cdp===o&&e(n.sub);for(R=[],S=0,w=l.length;w>S;S++)d=l[S],R.push(s(d));return R},s=function(o){return $("#"+o+" select").off(),$("#"+o+" select").on("change",function(){var e,s,l,c,h,u,f,p,m,d,g,v,S,b,P,w,x,R,G,J,N,O,j,q,y,A,I,k,z,B,C,D,E,F;for(S=$(this).val(),b=0,R=t.length;R>b;b++)f=t[b],f.nome===S&&(d=f.ref);if(c="img/","malhas"===o&&($("#canvas img").attr("src",""),$("#cor option").remove(),malhaSelecionada=d,r.splice(0,r.length)),"malhas"===o||"punhos"===o||"golas"===o){for(P=0,G=t.length;G>P;P++)f=t[P],f.nome===S&&(m=f.oid);c+=o+"/"+d+"/",n(m)}else if("cor"===o){for(console.log(r),w=0,J=r.length;J>w;w++)p=r[w],p.nome===S&&(l=p.ref);for(s=malhaSelecionada,x=0,N=r.length;N>x;x++)p=r[x],p.nome===S&&(e=p.oid)}else if("modeloGola"===o){for(k=0,O=a.length;O>k;k++)p=a[k],p.nome===S&&(u=p.ref);for(z=0,j=a.length;j>z;z++)p=a[z],p.nome===S&&(h=p.subPaiRef);for(B=0,q=a.length;q>B;B++)p=a[B],p.nome===S&&(m=p.oid)}else{for(C=0,y=i.length;y>C;C++)p=i[C],p.nome===S&&(v=p.ref);for(D=0,A=i.length;A>D;D++)p=i[D],p.nome===S&&(g=p.subPaiRef);for(E=0,I=i.length;I>E;E++)p=i[E],p.nome===S&&(m=p.oid)}return"cor"===o||"ribana"===o?(F="malhas",void 0!==l&&(corSelecionada=l),c+=F+"/"+s+"/"+corSelecionada+".png",$("#canvas ."+F+" img").attr("src",c)):"modeloGola"===o?(F="golas",c+="golas/"+h+"/"+u+".png",$("#canvas ."+F+" img").attr("src",c)):"modeloPunhos"===o?(F="punhos",c+="golas/"+g+"/"+v+".png",$("#canvas ."+F+" img").attr("src",c)):"malhas"===o&&(corSelecionada="01",c+=corSelecionada+".png",$("#canvas ."+o+" img").attr("src",c)),console.log(corSelecionada)})},p=[],u=0,f=h.length;f>u;u++)c=h[u],p.push(s(c));return p};